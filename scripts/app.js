angular.module("search",["ngSanitize"]),angular.module("search").controller("SearchController",["$scope","$filter","$http",function(e,r,t){return e.result=[],e.category="sss",e.errors=[],t.get("data/cities.json").success(function(r){return e.cities=r}),e.search=function(r){return e.errors.length=0,e.result.length=0,e.query=r,e.load(),$("#city_list").hide()},e.load=function(){var t,s,n,o,u,i,a,l;for(t=function(r){return function(t){var s,n,o,u,i;if(n=void 0,r.status="processing",t.error)return e.errors.push(r.name),r.status="error";for(i=t.feed.entries,o=0,u=i.length;u>o;o++)s=i[o],s.publishedDate=Date.parse(s.publishedDate);return e.result=e.result.concat(t.feed.entries),r.status="success",e.$apply()}},u=void 0,o=void 0,s=r("filter")(e.cities,{selected:!0}),e.result.length=0,l=[],i=0,a=s.length;a>i;i++)n=s[i],o=new google.feeds.Feed("http://"+n.slug+".craigslist.org/search/?catAbb="+e.category+"&query="+e.query+"&format=rss"),n.status="pending",o.setNumEntries(100),l.push(o.load(t(n)));return l},e.citiesto=function(r){var t,s;for(t=void 0,t=0,s=[];t<e.cities.length;)e.cities[t].selected=r,s.push(t+=1);return s},e.now=function(){return new Date}}]),angular.module("search").filter("delta",function(){return function(e){var r,t,s,n;return r=void 0,t=void 0,s=void 0,n=Math.floor(e/1e3),s=Math.floor(n/60),t=Math.floor(s/60),r=Math.floor(t/24),r>0?r+"d "+(t-24*r)+"h":t>0?t+"h "+(s-60*t)+"m":s>0?s+"m "+(n-60*s)+"s":n+"s"}});